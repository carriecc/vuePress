---
tag: 
  - SVG
---

# SVG sprite

## How to Scale SVG

HTML 可替换元素的默认尺寸是宽 300px，高 150px，因此 SVG 元素也是这个尺寸，这是 HTML5 标准，其他浏览器会将 SVG 尺寸设成`idth: 100vw; height: 100vh;`，IE 则是使用 100% 宽度和 150px 高度。

```css
/* Do whatever makes sense here.
   Just know that the svg will be an 
   enormous 100% wide if you don't 
   reign in the width. */
.icon {
  display: inline-block;
  width: 25px;
  height: 25px;
  vertical-algin: bottom;
}
```

## 兼容

IE：使用`<use/>`闭标签时，不能省略最后的斜杠。

## Shadow DOM

Shadow DOM 节点属于*文档片段*，因此不能像普通 DOM 节点那样受脚本和样式控制，可用于封装模块组件。`<use>`元素被称为 *Shadow Host*。

SVG 属性（表现型属性）属于“作者样式表”，会被其他样式定义覆盖：外部样式表，文件样式表和行内样式。但是 SVG 属性可以覆盖继承的样式。

因此，尽管`<use>`的样式会被 Shadow DOM 继承，但会被 SVG 属性覆盖。

不建议修改 SVG 属性，因为这些属性会被设置成浏览器默认值，也就是黑色。如果外部样式没有加载进来，SVG 属性是一个很好的 fallback。

如果`<symbol>`是位于 html 文件，或者用 svg4everybody 将`<use>`替换成实际的 DOM，可以通过设置 SVG 内部使用 inherit 的颜色：

```css
svg path,
svg g {
	fill: inherit;
}
```

这样就可以通过继承父元素的 fill 属性。但是对于外链的 SVG，只能把 SVG 本身的 fill 去掉才能把父元素的颜色继承下去，说明这种情况下不能通过选择器来选中 Shadow DOM 中的元素。并且如果多色的 SVG，全局设置 inherit 并不合适。

如果需要对多个属性比如`fill`，`stroke`等进行 inherit 的设置，可以使用`all: inherit`的声明，这样只会影响那些可以被 CSS 控制的属性，而不会影响纯 SVG 属性。（试验中并不可以）。

## 多色图标

### 双色

对于双色图标，对于希望使用父元素 fill 颜色的不要设置 inherit 的属性值，而是在 SVG 中删除 fill 信息。对希望使用其他颜色的部分，使用`fill="currentColor"`的 SVG 属性。这样在写覆盖的颜色的时候：

```css
.codrops-1 {
  fill: #4BC0A5;
  color: #A4DFD1;
}
```

> 单色和双色图标更换颜色的方案兼容 IE9

使用了 currentColor 变量的部分就会使用 CSS 的 color 值。

### 多色

需要用 CSS 变量，为了兼容不支持 CSS 变量的浏览器，将 CSS 声明写在 SVG 里，这样不支持 CSS 变量的还可以降级到 SVG fill 属性:

```svg
<path d="..." fill="#1E8F90" style="fill: var(--primary-color)" />
```

再到`<use>`元素里声明变量值即可：

```css
#robot-1 {
  --primary-color: #0099CC;
  --secondary-color: #FFDF34;
  --tertiary-color: #333;
}
```

> 注意：如果没有声明变量值，使用了 CSS 变量的部分会变成默认的黑色。可以在`var()`的第二个参数传入备选颜色。

> 设置 CSS 变量的方法在外链 SVG 的情况下也可以修改 SVG 颜色，而不需要像之前那样去掉 SVG 的 fill 属性。