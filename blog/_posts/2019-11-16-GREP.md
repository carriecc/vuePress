---
tag: 
  - 正则
---

# 正则表达式 - 向前查找和向后查找

有时候我们需要匹配一个跟在别的样式前面的样式。比如，需要拿到价格 1 turkey costs 30€。需要拿到后面跟了 € 的数字。

## 向前查找

`x(?=y)`表示只有当 y 跟在后面才匹配 x。

```
let str = "1 turkey costs 30€";

alert( str.match(/\d+(?=€)/) ); // 30 (correctly skipped the sole number 1)
```

或者，如果我们要找的是数量，就可以用负的向前查找，`x(?!y)`表示只有当 y 没有跟在后面才匹配 x。

```
let str = "2 turkeys cost 60€";

alert( str.match(/\d+(?!€)/) ); // 2 (correctly skipped the price)
```

## 向后查找

- 正的向后查找：`(?<=y)x`，表示只有当 x 跟在 y 后面才匹配。
- 负的向后查找：`(?<!y)x`，表示只有当前面没有 y 的时候才匹配 x。

```
let str = "1 turkey costs $30";

alert( str.match(/(?<=\$)\d+/) ); // 30 (correctly skipped the sole number 1)
```

## 捕获组

通常来讲，向前查找和向后查找的括号内容都不会称为匹配结果的一部分。但如果我们想要捕获，也是可以的。只需要将它放在另一个括号里。

```
let str = "1 turkey costs 30€";
let reg = /\d+(?=(€|kr))/;

alert( str.match(reg) ); // 30, €
```

通常来说括号是从左到右编号的，但向后查找是个例外，总是在主样式以后捕获，因此`\d+`的匹配先出现，然后才是`(\$|€)`。

## 总结

lookaround 也可以手动完成，也就是通过循环通过上下文匹配和过滤所有文本。比如`str.matchAll`和`reg.exec`会返回`.index`属性，因此可以知道文本的位置。但通过正则表达式来做更好